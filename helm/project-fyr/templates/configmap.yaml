apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "project-fyr.fullname" . }}
  labels:
    {{- include "project-fyr.labels" . | nindent 4 }}
    app.kubernetes.io/name: project-fyr
    app.kubernetes.io/component: config
data:
  PROJECT_FYR_DATABASE_URL: {{ tpl .Values.config.databaseUrl . | quote }}
  PROJECT_FYR_K8S_CLUSTER_NAME: {{ .Values.config.clusterName | quote }}
  PROJECT_FYR_ROLLOUT_TIMEOUT_SECONDS: {{ .Values.config.rolloutTimeoutSeconds | quote }}
  {{- if hasKey .Values.config "watchAllNamespaces" }}
  PROJECT_FYR_WATCH_ALL_NAMESPACES: {{ .Values.config.watchAllNamespaces | quote }}
  {{- end }}
  {{- if hasKey .Values.config "namespaceLabelEnabled" }}
  PROJECT_FYR_NAMESPACE_LABEL_ENABLED: {{ .Values.config.namespaceLabelEnabled | quote }}
  {{- end }}
  PROJECT_FYR_SLACK_BOT_TOKEN: {{ .Values.config.slackBotToken | quote }}
  PROJECT_FYR_SLACK_DEFAULT_CHANNEL: {{ .Values.config.slackDefaultChannel | quote }}
  {{- if .Values.config.slackApiUrl }}
  PROJECT_FYR_SLACK_API_URL: {{ .Values.config.slackApiUrl | quote }}
  {{- end }}
  PROJECT_FYR_OPENAI_API_KEY: {{ .Values.config.openaiApiKey | quote }}
  PROJECT_FYR_LANGCHAIN_MODEL_NAME: {{ .Values.config.langchainModelName | quote }}
  {{- if .Values.config.prometheusUrl }}
  PROJECT_FYR_PROMETHEUS_URL: {{ .Values.config.prometheusUrl | quote }}
  {{- end }}
  PROJECT_FYR_LOG_TAIL_SECONDS: {{ .Values.config.logTailSeconds | quote }}
  PROJECT_FYR_MAX_LOG_LINES: {{ .Values.config.maxLogLines | quote }}
  PROJECT_FYR_REDUCER_MAX_EVENTS: {{ .Values.config.reducerMaxEvents | quote }}
  PROJECT_FYR_REDUCER_MAX_CLUSTERS: {{ .Values.config.reducerMaxClusters | quote }}
